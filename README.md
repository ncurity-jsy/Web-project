### **1. 요구사항 정의 (Requirements Definition)**

#### **1.1. 기능적 요구사항 (Functional Requirements)**

| ID | 기능 | 상세 설명 | 우선순위 |
| :-- | :--- | :--- | :--- |
| **FR-01** | **사용자 인증** | - **로그인:** 사용자는 ID/이메일과 비밀번호로 로그인할 수 있다. `POST /api/auth/login/` 요청 시, 서버는 **(1)계정 유효성**과 **(2)포털 접근 권한**을 순차적으로 확인한다.<br>  - **권한이 있는 경우:** 인증 성공 응답과 함께 세션 쿠키를 발급하고 대시보드로 리디렉션한다.<br>  - **권한이 없는 경우:** 계정은 유효하나 권한이 없으면, 관리자에게 자동으로 권한을 요청하고 사용자에게 "권한이 요청되었습니다. 관리자 승인 후 이용 가능합니다." 메시지를 표시한다. 로그인 상태는 되지 않는다.<br>- **로그인 상태 유지:** 로그인 폼의 '로그인 상태 유지' 체크 시, 세션 만료 기간을 30일로 설정한다. 미체크 시 브라우저 세션이 종료되면 만료된다.<br>- **로그아웃:** 사용자가 '로그아웃' 버튼을 클릭하면 `POST /api/auth/logout/` 요청으로 세션을 무효화하고 로그인 페이지로 이동한다.<br>- **에러 처리:** "존재하지 않는 사용자입니다", "비밀번호가 일치하지 않습니다" 등 실패 사유를 명확히 표시한다. | **High** |
| **FR-02** | **포털 대시보드** | - **레이아웃:** 로그인 후, `GET /api/apps/`를 호출하여 **(1)관리자가 설정한 공통 앱과 (2)사용자가 속한 부서의 전용 앱**을 표시한다.<br>- **앱 카드:** 모든 앱은 관리자에 의해 설정되며, 사용자는 앱을 수정하거나 삭제할 수 없다. 카드에는 '더보기(...)' 메뉴가 제공되지 않는다.<br>- **빈 상태(Empty State):** 표시할 앱이 아무것도 없을 경우, "표시할 앱이 없습니다. 관리자에게 문의하세요." 메시지를 중앙에 표시한다. | **High** |
| **FR-03** | **앱 실행** | - **실행 방식:** 관리자가 설정한 '링크 유형'에 따라 두 가지 방식으로 동작한다.<br>  - **웹 URL (`http`, `https`):** `<a>` 태그의 `href`에 저장된 URL을 `target="_blank"` 속성을 이용해 새 탭에서 연다.<br>  - **커스텀 프로토콜 (`msteams://`, `outlook://` 등):** 운영체제(OS)에 등록된 특정 앱을 실행하도록 요청한다.<br>- **보안:** 웹 URL의 경우 `rel="noopener noreferrer"` 속성을 추가하여 보안 취약점을 방지한다.<br>- **전제 조건:** 커스텀 프로토콜 방식은 사용자의 PC에 해당 앱이 정상적으로 설치되어 있고, 프로토콜 핸들러가 OS에 등록된 경우에만 동작한다. | **High** |
| **FR-04** | **UI/UX** | - **헤더:** 대시보드 상단 헤더에는 사용자 이름과 '로그아웃' 기능이 포함된 드롭다운 메뉴를 배치한다.<br>- **키보드 네비게이션:** Tab 키를 이용하여 헤더, 앱 카드 등 모든 인터랙티브 요소에 순차적으로 접근하고 Enter 키로 실행할 수 있어야 한다. | **Medium** |
| **FR-05** | **관리자 기능: 사용자 관리** | - **권한 요청 알림:** 권한 없는 사용자가 로그인을 시도하면, 관리자에게 알림(이메일, 시스템 알림 등)이 전송되어야 한다.<br>- **권한 관리 페이지:** 관리자는 '사용자 관리' 페이지에서 포털 사용 권한을 요청한 사용자 목록을 확인할 수 있어야 한다.<br>- **권한 승인/거절:** 관리자는 각 요청에 대해 '승인' 또는 '거절' 처리를 할 수 있어야 한다.<br>- **부서/팀 정보 관리:** 관리자는 각 사용자를 특정 부서 및 필요한 경우 하위 팀(예: 경영기획실 내 재무회계팀)에 배정하거나 변경할 수 있어야 한다. | **Medium** |
| **FR-06** | **관리자 기능: 앱 관리** | - **관리자용 앱 관리:** 관리자는 '관리자 페이지'에서 공통/부서별/팀별 앱을 등록, 수정, 삭제할 수 있다.<br>- **링크 유형 설정:** 앱 등록 시, **'링크 유형'**을 **'웹 URL'** 또는 **'커스텀 프로토콜(로컬 앱)'** 중에서 선택해야 한다.<br>- **앱 유형 설정:** 관리자가 앱을 등록/수정할 때, 해당 앱을 '공통 앱', '부서별 앱', 또는 '팀별 앱'으로 지정할 수 있다.<br>- **부서/팀 지정:**<br>  - '부서별 앱': 특정 부서(NS사업부, CS사업부 등)를 선택하여 앱을 할당한다.<br>  - '팀별 앱': 특정 부서('경영기획실')를 선택한 후, 그 안의 특정 팀('기획마케팅팀', '인재경영팀', '재무회계팀', '전략사업팀')을 선택하여 앱을 할당한다. | **High** |

#### **1.2. 비기능적 요구사항 (Non-Functional Requirements)**

| ID | 구분 | 상세 설명 |
| :-- | :--- | :--- |
| **NFR-01** | **성능** | - **페이지 로딩:** Time to First Byte (TTFB) 500ms 이내, First Contentful Paint (FCP) 1.5초 이내, 최종 페이지 로딩(Load) 3초 이내를 목표로 한다.<br>- **동시 접속:** 500명의 동시 사용자가 앱 목록 조회, 추가, 삭제 등의 핵심 기능을 사용할 때, 서버 평균 응답 시간을 2초 이내로 유지한다.<br>- **데이터베이스:** 앱 목록 조회(`SELECT`) 쿼리는 인덱스를 활용하여 100ms 이내에 완료되어야 한다. |
| **NFR-02** | **보안** | - **데이터 전송:** TLS 1.2 이상을 사용하여 모든 HTTP 트래픽을 암호화한다 (HTTPS 강제).<br>- **비밀번호:** Django의 기본 해시 시스템(PBKDF2)을 사용하여 안전하게 해시화하여 저장한다.<br>- **세션 관리:** Secure, HttpOnly 플래그를 적용한 세션 쿠키를 사용하며, 30일 후 자동 만료된다.<br>- **입력 검증:** Django Form/Serializer를 이용해 모든 사용자 입력 값에 대해 서버 사이드 유효성 검사(XSS, SQL Injection 방지)를 수행한다.<br>- **파일 업로드:** 업로드된 파일은 서버에서 확장자를 재검증하며, 5MB 이하의 `jpg`, `png`, `gif` 파일만 허용한다. |
| **NFR-03** | **사용성** | - **반응형 디자인:** 주요 중단점(Breakpoints)을 모바일(최대 767px), 태블릿(768px-1023px), 데스크톱(1024px 이상)으로 설정하고 각 해상도에 최적화된 레이아웃을 제공한다.<br>- **직관성:** 사용자가 별도의 가이드 없이 5분 이내에 로그인, 앱 추가/수정/삭제, 앱 실행 등 핵심 기능을 모두 사용할 수 있어야 한다.<br>- **접근성:** 시맨틱 HTML 태그를 사용하고 모든 이미지에 `alt` 속성을 제공하는 등 WCAG 2.1 Level AA 표준을 준수한다. |
| **NFR-04** | **신뢰성** | - **가용성 (Availability):** 월간 가용성 99.5%를 목표로 한다 (월 3.6시간 이하의 다운타임 허용).<br>- **데이터 백업:** RPO(복구 목표 시점) 24시간, RTO(복구 목표 시간) 4시간을 목표로 한다. 데이터베이스는 매일 자동 백업되며, 백업 파일은 최소 30일간 안전한 저장소(S3)에 보관한다. |
| **NFR-05** | **확장성** | - **아키텍처:** 백엔드 API 서버는 상태를 저장하지 않는 Stateless 아키텍처로 설계하여 수평 확장이 용이하도록 한다.<br>- **SSO 연동:** 향후 SAML, OAuth 2.0 프로토콜 기반의 SSO 연동을 고려하여 Django의 인증 백엔드를 확장 가능한 구조로 설계한다. |

---

### **2. 사용자 시나리오 (User Scenarios)**

#### **시나리오 1: 권한 없는 사용자의 첫 로그인 시도**

- **Actor:** 최사원 (신규 입사자, 포털 접근 권한 없음)
- **Pre-conditions:** 최사원은 유효한 사내 계정을 발급받았지만, 아직 개인화 포털 접근 권한은 부여받지 못했다.
- **Goal:** 포털에 처음으로 로그인하여 접근 권한을 자동으로 요청한다.
- **Post-conditions:** 최사원의 계정에 대한 접근 권한 요청이 관리자에게 전송된다. 최사원은 로그인에 성공하지 못하고, 안내 메시지를 확인한다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | 포털 로그인 페이지에 접속하여 자신의 유효한 ID와 비밀번호를 입력 후 '로그인' 버튼을 클릭한다. | **POST /api/auth/login/** 요청을 보낸다. 서버는 계정 정보(ID, PW)가 유효함을 확인한다. |
| 2 | "권한이 요청되었습니다. 관리자 승인 후 이용 가능합니다." 라는 안내 메시지를 확인한다. | 계정 인증 성공 후, 포털 접근 권한을 확인하지만 권한이 없음을 발견한다. 관리자에게 권한 요청을 생성/전송하고, 클라이언트에게 특정 에러 코드(예: 403 Forbidden)와 함께 해당 안내 메시지를 반환한다. |
| 3 | 로그인 페이지에 머무르는 것을 확인한다. | 사용자는 대시보드로 이동하지 않고, 로그인 페이지에 그대로 머무른다. |

#### **시나리오 2: 신규 사용자의 첫 포털 접속**

- **Actor:** 김대리 (부설연구소 소속)
- **Pre-conditions:** 김대리는 유효한 사내 계정을 가지고 있으며, 관리자로부터 포털 접근 권한 및 '부설연구소' 부서 배정을 받았다. **또한, 김대리의 PC에는 Microsoft Teams와 Outlook 데스크톱 앱이 설치되어 있다.**
- **Goal:** 처음으로 개인 포털에 접속하여 관리자가 설정해준 공통 앱과 부서 전용 앱을 확인하고 실행한다.
- **Post-conditions:** 김대리의 대시보드에는 관리자가 설정한 공통 앱과 부설연구소 전용 앱이 표시된다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | 웹 브라우저에서 포털 주소로 접속한다. | 로그인 페이지를 표시한다. |
| 2 | ID와 PW를 입력하고 '로그인' 버튼을 클릭한다. | **POST /api/auth/login/** 요청을 보낸다. 서버는 인증 및 권한 확인에 성공 후 세션 쿠키를 발급하고, 개인 대시보드 화면으로 리디렉션한다. |
| 3 | 대시보드에 접속하여 관리자가 미리 설정해 둔 'Microsoft Teams', 'Outlook', 'open web ui'(공통)과 'N8N'(부설연구소) 앱 카드를 확인한다. | `GET /api/apps/` 응답에 공통 앱('Microsoft Teams', 'Outlook', 'open web ui')과 '부설연구소' 부서 앱 정보가 포함되어 있다. |
| 4 | 'Microsoft Teams' 앱 카드를 클릭한다. | 브라우저가 `msteams://` 프로토콜 실행 여부를 묻거나, 즉시 로컬에 설치된 Microsoft Teams 앱을 실행시킨다. |
| 5 | 'open web ui' 앱 카드를 클릭한다. | 새 탭에서 `http://192.168.32.24:3000/` URL이 열린다. |
| 6 | 'N8N' 앱 카드를 클릭한다. | 새 탭에서 N8N의 웹 URL이 열린다. |

#### **시나리오 3: 기존 사용자의 대시보드 확인**

- **Actor:** 박과장 (부설연구소 소속)
- **Pre-conditions:** 박과장은 포털을 사용해왔다. 관리자가 'N8N'을 '부설연구소' 전용 앱으로 새로 추가했다.
- **Goal:** 포털에 접속하여 새로 추가된 부서 전용 앱을 확인한다.
- **Post-conditions:** 박과장의 대시보드에 새로 추가된 'N8N' 앱이 표시된다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | 포털에 접속한다. | 자동 로그인 처리되고, `GET /api/apps/`를 통해 앱 목록이 표시된 대시보드를 즉시 보여준다. |
| 2 | 대시보드에서 공통 앱인 'Microsoft Teams', 'Outlook'과 함께, 관리자가 새로 추가한 'N8N' 앱이 표시되는 것을 확인한다. | `GET /api/apps/` 응답에 공통 앱과 '부설연구소' 부서 앱 정보가 모두 포함되어 있다. |

#### **시나리오 4: 로그인 실패 및 재시도**

- **Actor:** 이사원 (회사 직원)
- **Pre-conditions:** 이사원은 유효한 계정을 가지고 있지만, 비밀번호를 잊어버렸을 수 있다.
- **Goal:** 포털에 로그인하려 했으나 비밀번호를 잘못 입력하여 실패하고, 올바른 정보로 다시 로그인한다.
- **Post-conditions:** 이사원이 성공적으로 로그인하여 개인 대시보드에 접근한다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | 포털 로그인 페이지에 접속하여 ID와 잘못된 비밀번호를 입력 후 '로그인' 버튼을 클릭한다. | **POST /api/auth/login/** 요청을 보낸다. 서버는 인증 실패 후 에러 응답(400 Bad Request)을 반환한다. |
| 2 | "ID 또는 비밀번호가 올바르지 않습니다." 에러 메시지를 확인한다. | API 에러 응답을 바탕으로, 로그인 폼 하단에 해당 에러 메시지를 표시한다. ID 입력 필드는 유지하고 PW 필드는 비운다. |
| 3 | 올바른 비밀번호를 다시 입력하고 '로그인' 버튼을 클릭한다. | **POST /api/auth/login/** 요청을 다시 보낸다. 서버는 인증 성공 후 세션 쿠키를 발급하고 대시보드로 리디렉션한다. |
| 4 | 개인 대시보드 화면이 성공적으로 표시되는 것을 확인한다. | `GET /api/apps/`를 통해 이사원의 앱 목록을 가져와 화면에 렌더링한다. |

#### **시나리오 5: 관리자의 공통 및 팀별 앱 설정**

- **Actor:** 관리자 (Admin)
- **Pre-conditions:** 관리자 계정으로 시스템에 로그인되어 있다.
- **Goal:** 전사 공통 앱('Microsoft Teams', 'Outlook', 'open web ui')과 특정 팀 전용 앱('재무회계 시스템')을 설정하여 사용자들에게 배포한다.
- **Post-conditions:** 'Microsoft Teams', 'Outlook' 앱은 **로컬 앱으로 실행**되도록, 'open web ui'와 '재무회계 시스템' 앱은 **웹 URL로 실행**되도록 설정된다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | 관리자 페이지의 '앱 관리' 메뉴로 이동하여 '새 앱 추가' 버튼을 클릭한다. | 관리자용 앱 등록 폼을 표시한다. |
| 2 | **링크 유형**을 **'커스텀 프로토콜(로컬 앱)'**으로 선택하고, 'Microsoft Teams' 이름과 프로토콜(`msteams://`)을 입력한다. 앱 유형을 '공통 앱'으로 선택한 후 저장한다. | **POST /api/admin/apps/** 요청으로 데이터를 전송한다. 서버는 앱을 공통 로컬 앱으로 저장하고 성공 응답을 반환한다. |
| 3 | 다시 '새 앱 추가'를 눌러 **링크 유형**을 **'커스텀 프로토콜(로컬 앱)'**으로 선택하고, 'Outlook' 이름과 프로토콜(`outlook://`)을 입력한다. 앱 유형을 '공통 앱'으로 선택 후 저장한다. | **POST /api/admin/apps/** 요청으로 데이터를 전송한다. 서버는 앱을 공통 로컬 앱으로 저장하고 성공 응답을 반환한다. |
| 4 | 다시 '새 앱 추가'를 눌러 **링크 유형**을 **'웹 URL'**로 선택하고, 'open web ui' 이름과 URL(`http://192.168.32.24:3000/`)을 입력한다. 앱 유형을 '공통 앱'으로 선택 후 저장한다. | **POST /api/admin/apps/** 요청으로 데이터를 전송한다. 서버는 앱을 공통 웹 URL 앱으로 저장하고 성공 응답을 반환한다. |
| 5 | 다시 '새 앱 추가'를 눌러 **링크 유형**을 **'웹 URL'**로 선택하고, '재무회계 시스템' 이름과 URL을 입력한다. 앱 유형을 '팀별 앱'으로 선택한다. | 부서를 선택하는 드롭다운이 나타난다. |
| 6 | 부서로 '경영기획실'을 선택한다. | '경영기획실'에 속한 팀('기획마케팅팀', '인재경영팀'...) 목록이 나타난다. |
| 7 | 팀 목록에서 '재무회계팀'을 체크하고 '저장' 버튼을 클릭한다. | **POST /api/admin/apps/** 요청으로 데이터를 전송한다. 서버는 앱과 '재무회계팀'을 매핑하여 저장하고 성공 응답을 반환한다. |
| 8 | 목록에서 각 앱들이 올바른 링크 유형과 할당 정보로 추가된 것을 확인한다. | 앱 목록에 새로운 앱 정보가 즉시 반영된다. |

#### **시나리오 6: 팀 전용 앱 접근 권한 확인**

- **Actor:** 김회계 (경영기획실 재무회계팀), 이기획 (경영기획실 기획마케팅팀)
- **Pre-conditions:**
    - 관리자가 '재무회계 시스템' 앱을 '경영기획실-재무회계팀' 전용으로 할당해두었다.
    - 김회계와 이기획은 모두 '경영기획실'이라는 동일한 부서 소속이지만, 팀이 다르다.
- **Goal:** 동일 부서 내에서도 팀에 따라 앱 접근 권한이 올바르게 분리되는지 확인한다.
- **Post-conditions:**
    - 김회계의 대시보드에는 '재무회계 시스템' 앱이 보인다.
    - 이기획의 대시보드에는 '재무회계 시스템' 앱이 보이지 않는다.

| 단계 | 사용자 행동 (User Action) | 시스템 반응 (System Response) |
| :--- | :--- | :--- |
| 1 | **(김회계)** 포털에 로그인한다. | `GET /api/apps/` 요청 시, '재무회계팀' 소속임을 식별하여 앱 목록을 조회한다. |
| 2 | **(김회계)** 대시보드에서 공통 앱과 함께 '재무회계 시스템' 앱이 표시되는 것을 확인한다. | 응답받은 앱 목록에 '재무회계 시스템'이 포함되어 UI에 렌더링된다. |
| 3 | **(이기획)** 포털에 로그인한다. | `GET /api/apps/` 요청 시, '기획마케팅팀' 소속임을 식별하여 앱 목록을 조회한다. |
| 4 | **(이기획)** 대시보드에서 공통 앱은 보이지만, '재무회계 시스템' 앱은 표시되지 않는 것을 확인한다. | 응답받은 앱 목록에 '재무회계 시스템'이 포함되어 있지 않아 UI에 렌더링되지 않는다. |
